set(MY_INCLUDE_DIRS
  ${LIBUV_INCLUDE_DIRS}
  ${CURL_INCLUDE_DIRS}
  ${OpenSSL_INCLUDE_DIRS}
  ${LIBWEBSOCKETS_INCLUDE_DIRS}
  ${NLOHMANN_JSON_INCLUDE_DIRS}
  ${CMAKE_SOURCE_DIR}/base
  ${CMAKE_SOURCE_DIR}/hep
)

set(MY_EXTERNAL_LIBS
  ${LIBUV_LIBRARIES}
  ${CURL_LIBRARIES}
  ${OpenSSL_LIBRARIES}
  ${LIBWEBSOCKETS_LIBRARIES}
  RHTTP
  NdmspcBase
  NdmspcCore
  NdmspcHep
)

if(WITH_OPENTELEMETRY)
  list(APPEND MY_EXTERNAL_LIBS ${OPENTELEMETRY_CPP_LIBRARIES})
  list(APPEND MY_INCLUDE_DIRS ${OPENTELEMETRY_CPP_INCLUDE_DIRS})
  message(STATUS "MY_INCLUDE_DIRS: ${MY_INCLUDE_DIRS}")
endif()

include_directories(${MY_INCLUDE_DIRS})
file(GLOB EXEC_SRCS RELATIVE ${CMAKE_CURRENT_SOURCE_DIR} "*.cxx")
string(REPLACE ".cxx" "" EXECS "${EXEC_SRCS}")
foreach(t ${EXECS})
  RootBin(${t} "${t}.cxx" "${MY_EXTERNAL_LIBS}")
endforeach(t)

