set(MODULE Base)
set(PACKAGE Ndmspc${MODULE})
file(GLOB SRCS RELATIVE "${CMAKE_CURRENT_SOURCE_DIR}" "*.cxx")

set(MY_INCLUDE_DIRS
  ${OPENTELEMETRY_CPP_INCLUDE_DIRS}
  ${OpenSSL_INCLUDE_DIRS}
  ${LIBUV_INCLUDE_DIRS}
  ${CURL_INCLUDE_DIRS}
  ${LIBWEBSOCKETS_INCLUDE_DIRS}
  ${NLOHMANN_JSON_INCLUDE_DIRS}
)
include_directories(${MY_INCLUDE_DIRS})
set(MY_EXTERNAL_LIBS
  RHTTP
  ${OPENTELEMETRY_CPP_LIBRARIES}
  ${OpenSSL_LIBRARIES}
  ${LIBUV_LIBRARIES}
  ${CURL_LIBRARIES}
  ${LIBWEBSOCKETS_LIBRARIES}
  ${NLOHMANN_JSON_LIBRARIES}
)
if(ARROW_WITH_PARQUET)
  list(APPEND MY_INCLUDE_DIRS ${Arrow_INCLUDE_DIRS} ${Parquet_INCLUDE_DIRS})
  list(APPEND MY_EXTERNAL_LIBS Arrow::arrow_shared Parquet::parquet_shared)
endif()

if(WITH_OPENTELEMETRY)
  list(APPEND MY_EXTERNAL_LIBS ${OPENTELEMETRY_CPP_LIBRARIES})
  list(APPEND MY_INCLUDE_DIRS ${OPENTELEMETRY_CPP_INCLUDE_DIRS})
  include_directories(${OPENTELEMETRY_CPP_INCLUDE_DIRS})
  message(STATUS "MY_INCLUDE_DIRS: ${MY_INCLUDE_DIRS}")
  list(APPEND SRCS opentelemetry/NLogExporter.cxx)
  list(APPEND SRCS opentelemetry/NLogExporterFactory.cxx)
endif()

RootLib(${PACKAGE} "${SRCS}" "${MY_EXTERNAL_LIBS}" "")

